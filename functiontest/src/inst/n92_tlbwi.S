#include <asm/asm.h>
#include <asm/regdef.h>
#include <cpu.h>
#include <machine.h>
#include <ns16550.h>
#include <asm/context.h>
#include <inst_test.h>

LEAF(n92_tlbwi_test)
    .set noreorder
    lui  a0, 0x100
    li  v0, 0x0
###test inst
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0x0, 0x61754443, 0x000007a0)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0x1, 0x5c4fb45a, 0x00000aac)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0x2, 0x14908300, 0x00000ae8)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0x3, 0x516da739, 0x000000cc)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0x4, 0x85675a34, 0x00000510)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0x5, 0x0e4dac98, 0x00000040)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0x6, 0xd9c6eddb, 0x00000180)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0x7, 0x5753dd01, 0x00000ca0)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0x8, 0xe543b9f3, 0x0000031c)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0x9, 0x4726aca2, 0x00000cf8)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0xa, 0xb022040a, 0x00000800)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0xb, 0x5ca0fd00, 0x00000834)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0xc, 0x063ba000, 0x00000c64)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0xd, 0xc2268cfe, 0x000001e8)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0xe, 0x1611444c, 0x00000484)
    TEST_TLBWI(0x0, 0x4002, 0x4042, 0xf, 0x33cc6f2a, 0x000001dc)
###detect exception
    bne v0, zero, inst_error
    nop
###score ++
    addiu s3, s3, 1
###output a0|s3
inst_error:  
    or t0, a0, s3 
    sw t0, 0(s1)
    jr ra
    nop
END(n92_tlbwi_test)
    
